(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4143:function(e,t,n){Promise.resolve().then(n.bind(n,1708))},1708:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return e6}});var r,l,a=n(7437),o=n(3606),s=n(2265),i=n(9655),c=n(202),d=n(5087),u=n(970),m=n(5849),h=n(1657);let x=e=>{let{w:t,onAddNode:n,setActiveItem:r,...l}=e,o=(0,s.useCallback)((e,n)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},[]),i=()=>{r(t)};return(0,a.jsx)("button",{className:(0,h.cn)("cursor-click shadow-sm -mt-px w-full text-left text-accent-foreground hover:text-muted-foreground","relative z-0 hover:z-50 px-1 py-0.7 rounded transition duration-200 border border-background hover:border-white bg-background text-xs"),onClick:e=>{e.preventDefault(),n({widget:t})},draggable:!0,onDragStart:e=>o(e,t),onMouseEnter:()=>i(),onMouseLeave:()=>{r(null)},...l,children:(0,m.Z)(t.name)})},p=s.memo(e=>{let{category:t,items:n,setActiveItem:r,onAddNode:l,expandedItems:o,setExpandedItems:s}=e;return console.log(t,n),(0,a.jsxs)(i.qu,{children:[(0,a.jsx)(i.xx,{className:"text-xs text-center py-0 my-0 px-1 w-full",children:t}),(0,a.jsx)(i.dp,{className:"p-2",children:(0,a.jsxs)("div",{className:"flex flex-col items-baseline justify-start",children:[Object.entries(n.subcategories).map(e=>{let[t,n]=e;return(0,a.jsx)(p,{category:t,items:n,setActiveItem:r,onAddNode:l,expandedItems:o,setExpandedItems:s},t)}),Object.values(n.subcategories).length>0&&n.widgets.length>0&&(0,a.jsx)(i.uP,{}),n.widgets.map(e=>(0,a.jsx)(x,{w:e,onAddNode:l,setActiveItem:r},e.name))]})})]})});var f=n(2177);let g=s.memo(e=>{let{setActiveItem:t,setShowPath:n}=e,{widgets:r,onAddNode:l}=(0,u.q)((0,d.N)(e=>({widgets:e.widgets,onAddNode:e.onAddNode}))),[o,m]=(0,s.useState)({}),[h,g]=(0,s.useState)(""),[v,w]=(0,s.useState)([]),[b,j]=(0,s.useState)([]);(0,s.useEffect)(()=>{let e={};n(""!==h);let t=(t,n)=>{let r=e;t.forEach((e,l)=>{r[e]||(r[e]={widgets:[],subcategories:{}}),l===t.length-1&&r[e].widgets.push(n),r=r[e].subcategories})},l=Object.values(r);for(let e of(h&&(l=l.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()))),l))t(e.category.split("/"),e);w(l),m(e)},[r,h]);let y=(0,s.useCallback)(e=>{g(e.target.value)},[]);return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex px-2",children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{name:"search",autoComplete:"off",type:"text",className:"px-9 flex h-6 w-full rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search...",onChange:y,onKeyDown:e=>e.stopPropagation(),autoFocus:!0}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2   flex items-center   pointer-events-none",children:(0,a.jsx)(f._Ve,{className:"w-4 h-4 text-gray-400"})})]})}),(0,a.jsx)(i.uP,{}),(0,a.jsx)("div",{className:"flex flex-col",children:""===h?Object.entries(o).map((e,n)=>{let[r,o]=e;return(0,a.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.01*n,duration:.2},children:(0,a.jsx)(p,{category:r,items:o,setActiveItem:t,onAddNode:l,expandedItems:b,setExpandedItems:j},r)},r)}):Object.values(v).map(e=>(0,a.jsx)(x,{w:e,onAddNode:l,setActiveItem:t},e.name))})]})});var v=n(7014),w=n(8325);let b=e=>{let{isRequired:t,position:n}=e;return(0,a.jsx)("div",{className:"mt-1.5 react-flow__handle ".concat(t?"bg-primary":"bg-border"," ").concat("left"===n?"mr-2":"ml-2"),style:{width:"12px",height:"12px",position:"absolute",[n]:-3}})},j=s.memo(e=>{let{data:t,showPath:n,flipPath:r}=e,{outputs:l,params:o,inputs:i}=(0,s.useMemo)(()=>{let e=t.output.map(e=>({name:e,type:e})),n=[],r=[];return Object.entries({...t.input.required,...t.input.optional}).forEach(e=>{let[t,l]=e;v.lj.isParameterOrList(l)?n.push({name:t,type:l[0],input:l}):r.push({name:t,type:l[0]})}),{outputs:e,params:n,inputs:r}},[t]),d=t.category+"/"+t.name,u=()=>(0,a.jsx)("div",{className:"w-full h-full truncate text-xs bg-black text-neutral-400 rounded-full flex justify-center items-center transform ".concat(r?"-":"","translate-y-1/2"),children:d.replaceAll("/"," â€º ")});return(0,a.jsxs)(c.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:20,duration:.15},className:"w-[350px]",children:[n&&r&&(0,a.jsx)(u,{}),(0,a.jsxs)(w.O,{title:t.name,active:!1,preview:!0,children:[(0,a.jsxs)("div",{className:"flex w-full items-stretch justify-between space-x-6",children:[(0,a.jsx)("div",{className:"flex-1",children:i.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b,{position:"left",isRequired:1}),(0,a.jsx)("span",{className:"text-sm",children:(0,m.Z)(e.name)})]},t))}),(0,a.jsx)("div",{className:"flex-1 text-right",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[(0,a.jsx)("span",{className:"text-sm",children:(0,m.Z)(e.name)}),(0,a.jsx)(b,{position:"right",isRequired:1})]},t))})]}),(0,a.jsx)("div",{className:"mt-4",children:o.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-sm",children:(0,m.Z)(e.name)})},t))})]}),n&&!r&&(0,a.jsx)(u,{})]})}),y=e=>{let{children:t}=e,[n,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)({x:"right",y:"bottom"}),[u,m]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e=e=>{e.clientX>2*window.innerWidth/3?(d({x:"left",y:"top"}),m(!0)):(d({x:"right",y:"bottom"}),m(!1))};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i.xV,{children:[(0,a.jsx)(i.W4,{children:t}),(0,a.jsx)(i.h_,{className:"overflow-auto",children:(0,a.jsx)(g,{setActiveItem:r,setShowPath:o})})]}),null!==n&&(0,a.jsx)("div",{className:"fixed z-[60] ".concat(c.x,"-0 ").concat(c.y,"-0 text-accent-foreground bg-muted/50 p-8 rounded-lg border backdrop-blur-sm"),children:(0,a.jsx)(j,{data:n,showPath:l,flipPath:u})})]})};var N=n(5400),C=n(2936),k=n(5754),E=n(2110),S=n(4991),D=n(1266),_=n(4104),T=n(1260),z=n(8687),M=n(2338),O=(n(7881),n(2642)),R=n(9586),L=n(9143),A=n(9310),P=n(1780);let[I,Z]=(0,_.b)("Tooltip",[M.D7]),F=(0,M.D7)(),V="tooltip.open",[H,$]=I("TooltipProvider"),W="Tooltip",[K,q]=I(W),B="TooltipTrigger",U=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,...r}=e,l=q(B,n),a=$(B,n),o=F(n),i=(0,s.useRef)(null),c=(0,D.e)(t,i,l.onTriggerChange),d=(0,s.useRef)(!1),u=(0,s.useRef)(!1),m=(0,s.useCallback)(()=>d.current=!1,[]);return(0,s.useEffect)(()=>()=>document.removeEventListener("pointerup",m),[m]),(0,s.createElement)(M.ee,(0,E.Z)({asChild:!0},o),(0,s.createElement)(R.WV.button,(0,E.Z)({"aria-describedby":l.open?l.contentId:void 0,"data-state":l.stateAttribute},r,{ref:c,onPointerMove:(0,S.M)(e.onPointerMove,e=>{"touch"===e.pointerType||u.current||a.isPointerInTransitRef.current||(l.onTriggerEnter(),u.current=!0)}),onPointerLeave:(0,S.M)(e.onPointerLeave,()=>{l.onTriggerLeave(),u.current=!1}),onPointerDown:(0,S.M)(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:(0,S.M)(e.onFocus,()=>{d.current||l.onOpen()}),onBlur:(0,S.M)(e.onBlur,l.onClose),onClick:(0,S.M)(e.onClick,l.onClose)})))}),[G,X]=I("TooltipPortal",{forceMount:void 0}),Y="TooltipContent",J=(0,s.forwardRef)((e,t)=>{let n=X(Y,e.__scopeTooltip),{forceMount:r=n.forceMount,side:l="top",...a}=e,o=q(Y,e.__scopeTooltip);return(0,s.createElement)(O.z,{present:r||o.open},o.disableHoverableContent?(0,s.createElement)(en,(0,E.Z)({side:l},a,{ref:t})):(0,s.createElement)(Q,(0,E.Z)({side:l},a,{ref:t})))}),Q=(0,s.forwardRef)((e,t)=>{let n=q(Y,e.__scopeTooltip),r=$(Y,e.__scopeTooltip),l=(0,s.useRef)(null),a=(0,D.e)(t,l),[o,i]=(0,s.useState)(null),{trigger:c,onClose:d}=n,u=l.current,{onPointerInTransitChange:m}=r,h=(0,s.useCallback)(()=>{i(null),m(!1)},[m]),x=(0,s.useCallback)((e,t)=>{let n=e.currentTarget,r={x:e.clientX,y:e.clientY},l=function(e,t){let n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),l=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,l,a)){case a:return"left";case l:return"right";case n:return"top";case r:return"bottom";default:throw Error("unreachable")}}(r,n.getBoundingClientRect());i(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let r=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(r.y-n.y)>=(e.y-n.y)*(r.x-n.x))t.pop();else break}t.push(r)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let r=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(r.y-t.y)>=(e.y-t.y)*(r.x-t.x))n.pop();else break}n.push(r)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(t)}([...function(e,t,n=5){let r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,l),...function(e){let{top:t,right:n,bottom:r,left:l}=e;return[{x:l,y:t},{x:n,y:t},{x:n,y:r},{x:l,y:r}]}(t.getBoundingClientRect())])),m(!0)},[m]);return(0,s.useEffect)(()=>()=>h(),[h]),(0,s.useEffect)(()=>{if(c&&u){let e=e=>x(e,u),t=e=>x(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,x,h]),(0,s.useEffect)(()=>{if(o){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},r=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),l=!function(e,t){let{x:n,y:r}=e,l=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e].x,s=t[e].y,i=t[a].x,c=t[a].y;s>r!=c>r&&n<(i-o)*(r-s)/(c-s)+o&&(l=!l)}return l}(n,o);r?h():l&&(h(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,o,d,h]),(0,s.createElement)(en,(0,E.Z)({},e,{ref:a}))}),[ee,et]=I(W,{isInside:!1}),en=(0,s.forwardRef)((e,t)=>{let{__scopeTooltip:n,children:r,"aria-label":l,onEscapeKeyDown:a,onPointerDownOutside:o,...i}=e,c=q(Y,n),d=F(n),{onClose:u}=c;return(0,s.useEffect)(()=>(document.addEventListener(V,u),()=>document.removeEventListener(V,u)),[u]),(0,s.useEffect)(()=>{if(c.trigger){let e=e=>{let t=e.target;null!=t&&t.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),(0,s.createElement)(T.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:e=>e.preventDefault(),onDismiss:u},(0,s.createElement)(M.VY,(0,E.Z)({"data-state":c.stateAttribute},d,i,{ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),(0,s.createElement)(L.A4,null,r),(0,s.createElement)(ee,{scope:n,isInside:!0},(0,s.createElement)(P.f,{id:c.contentId,role:"tooltip"},l||r))))}),er=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:r=300,disableHoverableContent:l=!1,children:a}=e,[o,i]=(0,s.useState)(!0),c=(0,s.useRef)(!1),d=(0,s.useRef)(0);return(0,s.useEffect)(()=>{let e=d.current;return()=>window.clearTimeout(e)},[]),(0,s.createElement)(H,{scope:t,isOpenDelayed:o,delayDuration:n,onOpen:(0,s.useCallback)(()=>{window.clearTimeout(d.current),i(!1)},[]),onClose:(0,s.useCallback)(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>i(!0),r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:(0,s.useCallback)(e=>{c.current=e},[]),disableHoverableContent:l},a)},el=e=>{let{__scopeTooltip:t,children:n,open:r,defaultOpen:l=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:i}=e,c=$(W,e.__scopeTooltip),d=F(t),[u,m]=(0,s.useState)(null),h=(0,z.M)(),x=(0,s.useRef)(0),p=null!=o?o:c.disableHoverableContent,f=null!=i?i:c.delayDuration,g=(0,s.useRef)(!1),[v=!1,w]=(0,A.T)({prop:r,defaultProp:l,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(V))):c.onClose(),null==a||a(e)}}),b=(0,s.useMemo)(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),j=(0,s.useCallback)(()=>{window.clearTimeout(x.current),g.current=!1,w(!0)},[w]),y=(0,s.useCallback)(()=>{window.clearTimeout(x.current),w(!1)},[w]),N=(0,s.useCallback)(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{g.current=!0,w(!0)},f)},[f,w]);return(0,s.useEffect)(()=>()=>window.clearTimeout(x.current),[]),(0,s.createElement)(M.fC,d,(0,s.createElement)(K,{scope:t,contentId:h,open:v,stateAttribute:b,trigger:u,onTriggerChange:m,onTriggerEnter:(0,s.useCallback)(()=>{c.isOpenDelayed?N():j()},[c.isOpenDelayed,N,j]),onTriggerLeave:(0,s.useCallback)(()=>{p?y():window.clearTimeout(x.current)},[y,p]),onOpen:j,onClose:y,disableHoverableContent:p},n))},ea=s.forwardRef((e,t)=>{let{className:n,sideOffset:r=4,...l}=e;return(0,a.jsx)(J,{ref:t,sideOffset:r,className:(0,h.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...l})});ea.displayName=J.displayName;var eo=n(9326),es=n(6288),ei=n(843);/**
 * @license lucide-react v0.352.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ec=(0,ei.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),ed=(0,ei.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),eu=e=>{let{onUpload:t}=e,[n,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(""),{dragOver:i,setDragOver:c,onDragOver:d,onDragLeave:u}=function(){let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)("");return{dragOver:e,setDragOver:t,onDragOver:e=>{e.preventDefault(),t(!0)},onDragLeave:()=>t(!1),fileDropError:n,setFileDropError:r}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-b",children:[(0,a.jsx)("label",{htmlFor:"file",onDragOver:d,onDragLeave:u,onDrop:e=>{e.preventDefault(),c(!1);let n=e.dataTransfer.files[0];return n?"application/json"!==n.type?o("Invalid file type! Only JSON files are accepted."):void(r(n),o(""),t(n)):o("No file selected.")},className:(0,h.cn)("px-4 py-2 border-[1.5px] border-dashed dark:border-neutral-700 m-4 rounded-lg flex flex-col justify-start items-center hover:cursor-pointer",i&&"border-blue-600 bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex flex-col p-4 justify-start items-center text-center",children:[(0,a.jsx)(f.rG2,{className:(0,h.cn)("h-5 w-5 text-neutral-600 my-4",i&&"text-blue-500")}),(0,a.jsx)("p",{className:"font-semibold",children:"Load a workspace or drag & drop it here"}),(0,a.jsx)("p",{className:"text-neutral-500 text-sm",children:"Only JSON files."})]})}),(0,a.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",onChange:e=>{let n=e.target.files?e.target.files[0]:null;return n?"application/json"!==n.type?o("Invalid file type! Only JSON files are accepted."):void(r(n),o(""),t(n)):o("No file selected.")},accept:"application/json"})]}),n&&(0,a.jsx)("div",{className:"w-full px-4 py-2 gap-2 flex flex-col justify-start items-center border-t dark:border-neutral-700 overflow-auto",children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center border dark:border-neutral-700 rounded-lg px-2 py-1 w-full group",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-start items-center gap-2",children:[(0,a.jsx)(ec,{className:"h-5 w-5 text-neutral-500"}),(0,a.jsx)(er,{children:(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)("p",{className:"truncate hover:cursor-help",children:n.name})}),(0,a.jsx)(ea,{children:(0,a.jsx)("p",{children:n.name})})]})}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:(0,h.t)(n.size)})]}),(0,a.jsx)("div",{className:"flex flex-row justify-end items-center gap-2",children:(0,a.jsx)("button",{className:"text-neutral-400 p-1 rounded-lg hover:text-black transition-all hover:cursor-pointer",onClick:()=>{r(null)},children:(0,a.jsx)(ed,{className:"h-4 w-4"})})})]})}),l&&(0,a.jsxs)("div",{className:"bg-orange-50 py-1 mx-2 rounded-lg text-center my-2 border border-orange-200 flex flex-row justify-center items-center gap-2",children:[(0,a.jsx)(ec,{className:"h-4 w-4 text-orange-400"}),(0,a.jsx)("p",{className:"text-orange-400 text-sm font-medium",children:l})]})]})};var em=n(5179);let eh=s.memo(e=>{let{item:t,index:n,handleRename:r,handleUpdate:l,handleDelete:o,handleLoad:i}=e,[c,d]=(0,s.useState)(!1),u=(0,s.useCallback)(e=>{d(!1);let n=e.target.value;n&&r(t.id,n)},[r,t.id]),m=(0,s.useCallback)(()=>{i(t.graph,t.title)},[i,t.graph,t.title]),h=(0,s.useCallback)(()=>{d(!c)},[c]),x=(0,s.useCallback)(()=>{l(t.id,t.title)},[l,t.id,t.title]),p=(0,s.useCallback)(()=>{(0,v.Cq)(t.graph,t.title)},[t.graph,t.title]),g=(0,s.useCallback)(()=>{o(t.id,t.title)},[o,t.id,t.title]),w=(0,s.useCallback)(()=>c?(0,a.jsx)(em.I,{defaultValue:t.title,className:"text-accent-foreground",autoFocus:!0,onBlur:u,onKeyDown:e=>["Enter"].includes(e.key)&&e.target.blur()}):(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)("a",{className:"flex overflow-hidden w-full",title:"Load",onClick:m,children:t.title})}),(0,a.jsx)(ea,{children:"Load"})]}),[c,t.title,n,u,m]);return(0,a.jsx)(er,{delayDuration:0,children:(0,a.jsx)("ul",{className:"list-none p-0 m-0",children:(0,a.jsx)("li",{className:"last:border-b-0",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{className:"text-muted-foreground w-full overflow-hidden hover:text-secondary h-7 m-1 p-1 flex items-center cursor-default [&>span]:line-clamp-1",title:"Load Workflow",style:{borderRadius:"5px"},children:(0,a.jsx)("span",{title:"Load",className:"flex items-center space-x-3 my-4 p-1 text-sm overflow-hidden w-full hover:bg-foreground whitespace-nowrap",style:{borderRadius:"5px"},children:w()})}),(0,a.jsxs)("div",{className:"flex justify-end items-center",children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-accent-foreground hover:bg-primary hover:text-black p-2 m-0",size:"narrow",onClick:h,children:(0,a.jsx)(f.SQj,{})})}),(0,a.jsx)(ea,{children:"Rename workflow"})]}),(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-accent-foreground hover:bg-primary hover:text-black p-2 m-0",size:"narrow",onClick:x,children:(0,a.jsx)(f.oqE,{})})}),(0,a.jsx)(ea,{children:"Overwrite with current"})]}),(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-accent-foreground hover:bg-primary hover:text-black p-2 m-0",size:"narrow",onClick:p,children:(0,a.jsx)(f._8t,{})})}),(0,a.jsx)(ea,{children:"Download to disk"})]}),(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-accent-foreground hover:bg-primary hover:text-black p-2 m-0",size:"narrow",onClick:g,children:(0,a.jsx)(f.ypG,{})})}),(0,a.jsx)(ea,{children:"Delete workflow"})]})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.S7f,{}),(0,a.jsx)("span",{children:Object.keys(t.graph.data).length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.qDj,{}),(0,a.jsx)("span",{children:t.graph.connections.length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(f.T39,{}),(0,a.jsx)("span",{children:(()=>{let e=new Date(t.time);return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)})()})]})]})})]})},t.id)})})});var ex=n(9842);let ep=s.memo(()=>{let[e,t]=(0,s.useState)(),[n,r]=(0,s.useState)(),[l,o]=(0,s.useState)(0),{onLoadWorkflow:i,onDownloadWorkflow:c,onSaveLocalWorkFlow:m,onUpdateLocalWorkFlowGraph:h,onUpdateLocalWorkFlowTitle:x}=(0,u.q)((0,d.N)(e=>({onLoadWorkflow:e.onLoadWorkflow,onDownloadWorkflow:e.onDownloadWorkflow,onSaveLocalWorkFlow:e.onSaveLocalWorkFlow,onUpdateLocalWorkFlowGraph:e.onUpdateLocalWorkFlowGraph,onUpdateLocalWorkFlowTitle:e.onUpdateLocalWorkFlowTitle}))),p=(0,s.useCallback)(()=>{m(e),o(l+1),es.Am.success("Success! ".concat(null!=e?e:"Your workflow"," has been saved."))},[l,m,e]),f=(0,s.useCallback)((e,t)=>{(0,v.Sf)(e),o(l+1),es.Am.info("".concat(t," has been deleted."))},[l]),g=(0,s.useCallback)((e,t)=>{e?(i(e),o(l+1),es.Am.success("".concat(t," successfully loaded."))):es.Am.error("".concat(t," is invalid."))},[l,i]),w=(0,s.useCallback)((e,t)=>{h(e),o(l+1),es.Am.success("".concat(t," successfully updated."))},[l,h]),b=(0,s.useCallback)((e,t)=>{x(e,t),o(l+1),es.Am.success("Workflow successfully renamed to ".concat(t,"."))},[l,x]);(0,s.useCallback)(()=>{(0,v.W)(),i(eo.Z),o(l+1)},[l,i]);let j=(0,s.useCallback)(e=>{(0,v.Sk)(e,e=>{e?i(e):es.Am.error("Invalid workflow file.")})},[l,i]);return(0,s.useEffect)(()=>{try{let e=(0,v.qW)();Array.isArray(e)?r(e.sort((e,t)=>t.time-e.time)):console.error("Invalid local workflow data.")}catch(e){console.error("Error retrieving local workflows:",e)}},[l]),(0,s.useCallback)((e,t)=>(0,a.jsx)(eh,{item:e,index:t,handleLoad:g,handleUpdate:w,handleDelete:f,handleRename:b}),[f,g,b,w]),(0,a.jsxs)("div",{className:"flex flex-col gap-4 overflow-auto",children:[(0,a.jsx)(k.z,{className:"bg-border hover:bg-accent-foreground text-accent-foreground hover:text-background mt-3 mx-5",onClick:p,children:"Save"}),(0,a.jsx)(eu,{onUpload:j}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ex._,{className:"text-neutral-500",children:"Local Workflows"}),null==n?void 0:n.map((e,t)=>(0,a.jsx)("li",{className:"list-none",children:(0,a.jsx)(eh,{item:e,index:t,handleLoad:g,handleUpdate:w,handleDelete:f,handleRename:b})},e.id))]})]})}),ef=e=>{let{setOpen:t}=e;return(0,a.jsxs)(C.PK,{children:[(0,a.jsx)(C.t9,{asChild:!0}),(0,a.jsx)(C.cZ,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black p-6 rounded-lg shadow-lg",children:[(0,a.jsx)(C.$N,{className:"text-lg font-bold",children:"Are you sure?"}),(0,a.jsx)(C.Be,{className:"text-sm",children:"This action will clear the graph. Do you want to proceed?"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,a.jsx)(C.GG,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>t(!1),variant:"outline",children:"Cancel"})}),(0,a.jsx)(k.z,{variant:"destructive",onClick:()=>{t(!1)},children:"Confirm"})]})]})})]})};var eg=n(5509),ev=n(2558);let ew=e=>{let{open:t,setOpen:n}=e,{onUpdateFrontend:r,edgeType:l,onEdgesType:o}=(0,u.q)((0,d.N)(e=>({onUpdateFrontend:e.onUpdateFrontend,edgeType:e.edgeType,onEdgesType:e.onEdgesType}))),s=[{label:"Client Frontend",item:e=>(0,a.jsxs)(eg.Ph,{onValueChange:async()=>r(),children:[(0,a.jsx)(eg.i4,{className:"w-32",children:(0,a.jsx)(eg.ki,{placeholder:"sabre"})}),(0,a.jsx)(eg.Bw,{children:e.map(e=>(0,a.jsx)(eg.Ql,{value:e,children:e},e))})]}),options:["classic","sabre"]},{label:"Edge Type",item:e=>(0,a.jsxs)(eg.Ph,{value:l.name,onValueChange:e=>o(ev.v.find(t=>t.name===e)),children:[(0,a.jsx)(eg.i4,{className:"w-32",children:(0,a.jsx)(eg.ki,{placeholder:(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[l.icon,(0,m.Z)(l.name)]})})}),(0,a.jsx)(eg.Bw,{className:"w-full",children:e.map(e=>(0,a.jsx)(eg.Ql,{className:"w-full",value:e.name,children:(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[e.icon,(0,m.Z)(e.name)]})},e.name))})]}),options:ev.v}];return(0,a.jsx)(C.PK,{children:(0,a.jsx)(C.cZ,{className:"absolute inset-0 w-96 h-52 p-4 mx-auto my-auto bg-black rounded-[12px]",children:(0,a.jsxs)("div",{className:"w-full h-50% bg-black p-1 shadow-lg relative",children:[(0,a.jsx)(C.$N,{className:"text-lg font-bold mt-0.5 mr-10",children:"Settings"}),(0,a.jsx)(C.GG,{asChild:!0,children:(0,a.jsx)(k.z,{className:"absolute top-0 right-2 p-1 bg-transparent hover:bg-transparent border-none shadow-none",onClick:()=>n(!1),variant:"outline",children:(0,a.jsx)(f.Pxu,{})})}),(0,a.jsx)("div",{className:"flex flex-col gap-2 mt-4",children:s.map(e=>(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center gap-1",children:[(0,a.jsx)("label",{className:"text-sm font-semibold",children:e.label}),e.item(e.options)]},e.label))}),(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)("div",{className:"flex flex-col gap-2 w-full pb-2",title:"Recalculate Node Positions",children:(0,a.jsx)(k.z,{className:"inline rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12 mt-1 ml-auto mr-10",variant:"outline",children:(0,a.jsx)(f.tPC,{})})})}),(0,a.jsx)(ea,{side:"right",className:"text-xs bg-black text-white",children:"Recalculate node positions"})]})]})})})},eb=e=>{let{content:t,children:n}=e;return(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:n}),(0,a.jsx)(ea,{side:"left",className:"text-xs",children:t})]})},ej=s.memo(()=>{let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(0),{onSubmit:l,queue:o,onDeleteFromQueue:i,promptError:c,onEdgesAnimate:m,expanded:x,onExpand:p}=(0,u.q)((0,d.N)(e=>({onSubmit:e.onSubmit,queue:e.queue,onDeleteFromQueue:e.onDeleteFromQueue,promptError:e.promptError,onEdgesAnimate:e.onEdgesAnimate,onExpand:e.onExpand,expanded:e.expanded})));(0,s.useEffect)(()=>{void 0!==c&&es.Am.error(c)},[c,n]),(0,s.useEffect)(()=>{m(o.length>0)},[o,m]);let g=(0,s.useCallback)(()=>{t(!0),l(),r(e=>e+1)},[l]);return o.length,(0,a.jsxs)(el,{children:[(0,a.jsx)(U,{asChild:!0,children:(0,a.jsx)(k.z,{className:(0,h.cn)("relative h-12 w-12 rounded-3xl shadow-lg bg-gradient-to-b text-white dark:text-black dark:from-white dark:to-blue-50 ring-2 ring-blue-50 ring-opacity-60","from-slate-800 to-slate-700 ring-slate-400","hover:rounded-lg transition-all duration-200"),onClick:g,children:(0,a.jsx)(f.o1U,{})})}),(0,a.jsx)(ea,{side:"left",className:"text-xs bg-white text-black",children:"Queue prompt"})]})}),ey=s.memo(()=>{let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!1),[l,o]=(0,s.useState)(!1),[i,c]=(0,s.useState)(!1),{expanded:d,onExpand:m}=(0,u.q)(e=>({expanded:e.expanded,onExpand:e.onExpand})),h=()=>{r(!n),m()};return(0,a.jsx)(er,{delayDuration:0,children:(0,a.jsxs)("div",{className:"fixed right-4 top-4 flex flex-col gap-3 m-2",children:[(0,a.jsx)(ej,{}),(0,a.jsxs)(N.yo,{modal:!0,open:e,onOpenChange:t,children:[(0,a.jsx)(eb,{content:"Save/load workflows",children:(0,a.jsx)(N.aM,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>t(!e),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(f.otr,{})})})}),(0,a.jsx)(N.ue,{side:"left",className:"overflow-auto",children:(0,a.jsx)(ep,{})})]}),(0,a.jsx)(eb,{content:"Show/hide controls",children:(0,a.jsx)(k.z,{onClick:()=>h(),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:n?(0,a.jsx)(f.g8U,{}):(0,a.jsx)(f.v4q,{})})}),(0,a.jsxs)(C.Vq,{open:l,onOpenChange:o,children:[(0,a.jsx)(eb,{content:"Clear graph",children:(0,a.jsx)(C.hg,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>o(!0),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(f.XHJ,{})})})}),(0,a.jsx)(ef,{setOpen:o})]}),(0,a.jsxs)(C.Vq,{open:i,onOpenChange:c,children:[(0,a.jsx)(eb,{content:"Settings",children:(0,a.jsx)(C.hg,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(f.UG6,{})})})}),(0,a.jsx)(ew,{open:i,setOpen:c})]})]})})});var eN=n(1105),eC=n(2628);function ek({color:e,dimensions:t,lineWidth:n}){return s.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function eE({color:e,radius:t}){return s.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(r=l||(l={})).Lines="lines",r.Dots="dots",r.Cross="cross";let eS={[l.Dots]:"#91919a",[l.Lines]:"#eee",[l.Cross]:"#e2e2e2"},eD={[l.Dots]:1,[l.Lines]:1,[l.Cross]:6},e_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eT({id:e,variant:t=l.Dots,gap:n=20,size:r,lineWidth:a=1,offset:i=2,color:c,style:d,className:u}){let m=(0,s.useRef)(null),{transform:h,patternId:x}=(0,o.oR)(e_,eC.X),p=c||eS[t],f=r||eD[t],g=t===l.Dots,v=t===l.Cross,w=Array.isArray(n)?n:[n,n],b=[w[0]*h[2]||1,w[1]*h[2]||1],j=f*h[2],y=v?[j,j]:b,N=g?[j/i,j/i]:[y[0]/i,y[1]/i];return s.createElement("svg",{className:(0,eN.Z)(["react-flow__background",u]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},s.createElement("pattern",{id:x+e,x:h[0]%b[0],y:h[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},g?s.createElement(eE,{color:p,radius:j/i}):s.createElement(ek,{dimensions:y,color:p,lineWidth:a})),s.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${x+e})`}))}eT.displayName="Background";var ez=(0,s.memo)(eT);function eM(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},s.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function eO(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},s.createElement("path",{d:"M0 0h32v4.2H0z"}))}function eR(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},s.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function eL(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function eA(){return s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},s.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}let eP=({children:e,className:t,...n})=>s.createElement("button",{type:"button",className:(0,eN.Z)(["react-flow__controls-button",t]),...n},e);eP.displayName="ControlButton";let eI=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),eZ=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:l,onZoomIn:a,onZoomOut:i,onFitView:c,onInteractiveChange:d,className:u,children:m,position:h="bottom-left"})=>{let x=(0,o.AC)(),[p,f]=(0,s.useState)(!1),{isInteractive:g,minZoomReached:v,maxZoomReached:w}=(0,o.oR)(eI,eC.X),{zoomIn:b,zoomOut:j,fitView:y}=(0,o._K)();return((0,s.useEffect)(()=>{f(!0)},[]),p)?s.createElement(o.s_,{className:(0,eN.Z)(["react-flow__controls",u]),position:h,style:e,"data-testid":"rf__controls"},t&&s.createElement(s.Fragment,null,s.createElement(eP,{onClick:()=>{b(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:w},s.createElement(eM,null)),s.createElement(eP,{onClick:()=>{j(),i?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:v},s.createElement(eO,null))),n&&s.createElement(eP,{className:"react-flow__controls-fitview",onClick:()=>{y(l),c?.()},title:"fit view","aria-label":"fit view"},s.createElement(eR,null)),r&&s.createElement(eP,{className:"react-flow__controls-interactive",onClick:()=>{x.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),d?.(!g)},title:"toggle interactivity","aria-label":"toggle interactivity"},g?s.createElement(eA,null):s.createElement(eL,null)),m):null};eZ.displayName="Controls";var eF=(0,s.memo)(eZ),eV=n(653),eH=n(6369),e$=n(3423);let eW=({id:e,x:t,y:n,width:r,height:l,style:a,color:o,strokeColor:i,strokeWidth:c,className:d,borderRadius:u,shapeRendering:m,onClick:h,selected:x})=>{let{background:p,backgroundColor:f}=a||{};return s.createElement("rect",{className:(0,eN.Z)(["react-flow__minimap-node",{selected:x},d]),x:t,y:n,rx:u,ry:u,width:r,height:l,fill:o||p||f,stroke:i,strokeWidth:c,shapeRendering:m,onClick:h?t=>h(t,e):void 0})};eW.displayName="MiniMapNode";var eK=(0,s.memo)(eW);let eq=e=>e.nodeOrigin,eB=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),eU=e=>e instanceof Function?e:()=>e;var eG=(0,s.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:l=2,nodeComponent:a=eK,onClick:i}){let c=(0,o.oR)(eB,eC.X),d=(0,o.oR)(eq),u=eU(t),m=eU(e),h=eU(n),x="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return s.createElement(s.Fragment,null,c.map(e=>{let{x:t,y:n}=(0,o.VP)(e,d).positionAbsolute;return s.createElement(a,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:h(e),color:u(e),borderRadius:r,strokeColor:m(e),strokeWidth:l,shapeRendering:x,onClick:i,id:e.id})}))});let eX=e=>{let t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(0,o.oI)((0,o.RX)(t,e.nodeOrigin),n):n,rfId:e.rfId}};function eY({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:l="",nodeBorderRadius:a=5,nodeStrokeWidth:i=2,nodeComponent:c,maskColor:d="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:m=1,position:h="bottom-right",onClick:x,onNodeClick:p,pannable:f=!1,zoomable:g=!1,ariaLabel:v="React Flow mini map",inversePan:w=!1,zoomStep:b=10,offsetScale:j=5}){let y=(0,o.AC)(),N=(0,s.useRef)(null),{boundingRect:C,viewBB:k,rfId:E}=(0,o.oR)(eX,eC.X),S=e?.width??200,D=e?.height??150,_=Math.max(C.width/S,C.height/D),T=_*S,z=_*D,M=j*_,O=C.x-(T-C.width)/2-M,R=C.y-(z-C.height)/2-M,L=T+2*M,A=z+2*M,P=`react-flow__minimap-desc-${E}`,I=(0,s.useRef)(0);I.current=_,(0,s.useEffect)(()=>{if(N.current){let e=(0,eH.Z)(N.current),t=(0,eV.sP)().on("zoom",f?e=>{let{transform:t,d3Selection:n,d3Zoom:r,translateExtent:l,width:a,height:o}=y.getState();if("mousemove"!==e.sourceEvent.type||!n||!r)return;let s=I.current*Math.max(1,t[2])*(w?-1:1),i={x:t[0]-e.sourceEvent.movementX*s,y:t[1]-e.sourceEvent.movementY*s},c=eV.CR.translate(i.x,i.y).scale(t[2]),d=r.constrain()(c,[[0,0],[a,o]],l);r.transform(n,d)}:null).on("zoom.wheel",g?e=>{let{transform:t,d3Selection:n,d3Zoom:r}=y.getState();if("wheel"!==e.sourceEvent.type||!n||!r)return;let l=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*b,a=t[2]*Math.pow(2,l);r.scaleTo(n,a)}:null);return e.call(t),()=>{e.on("zoom",null)}}},[f,g,w,b]);let Z=x?e=>{let t=(0,e$.Z)(e);x(e,{x:t[0],y:t[1]})}:void 0;return s.createElement(o.s_,{position:h,style:e,className:(0,eN.Z)(["react-flow__minimap",t]),"data-testid":"rf__minimap"},s.createElement("svg",{width:S,height:D,viewBox:`${O} ${R} ${L} ${A}`,role:"img","aria-labelledby":P,ref:N,onClick:Z},v&&s.createElement("title",{id:P},v),s.createElement(eG,{onClick:p?(e,t)=>{p(e,y.getState().nodeInternals.get(t))}:void 0,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:l,nodeStrokeWidth:i,nodeComponent:c}),s.createElement("path",{className:"react-flow__minimap-mask",d:`M${O-M},${R-M}h${L+2*M}v${A+2*M}h${-L-2*M}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:d,fillRule:"evenodd",stroke:u,strokeWidth:m,pointerEvents:"none"})))}eY.displayName="MiniMap";var eJ=(0,s.memo)(eY),eQ=n(4228),e0=n(1774),e1=n(8823);let e2={maxHistorySize:100,enableShortcuts:!0};var e3=function(){let{maxHistorySize:e=e2.maxHistorySize,enableShortcuts:t=e2.enableShortcuts}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e2,[n,r]=(0,s.useState)([]),[l,a]=(0,s.useState)([]),{setNodes:i,setEdges:c,getNodes:d,getEdges:u}=(0,o._K)(),m=(0,s.useCallback)(()=>{r(t=>[...t.slice(t.length-e+1,t.length),{nodes:d(),edges:u()}]),a([])},[d,u,e]),h=(0,s.useCallback)(()=>{let e=n[n.length-1];e&&(r(e=>e.slice(0,e.length-1)),a(e=>[...e,{nodes:d(),edges:u()}]),i(e.nodes),c(e.edges))},[i,c,d,u,n]),x=(0,s.useCallback)(()=>{let e=l[l.length-1];e&&(a(e=>e.slice(0,e.length-1)),r(e=>[...e,{nodes:d(),edges:u()}]),i(e.nodes),c(e.edges))},[i,c,d,u,l]);return(0,s.useEffect)(()=>{if(!t)return;let e=e=>{"z"===e.key&&(e.ctrlKey||e.metaKey)&&e.shiftKey?(x(),e.preventDefault()):"z"===e.key&&(e.ctrlKey||e.metaKey)&&(h(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,x,t]),{undo:h,redo:x,takeSnapshot:m,canUndo:!n.length,canRedo:!l.length}};n(7333);let e4=e=>{let{strength:t=-1e3,distance:n=1e3}=e,r=(0,s.useMemo)(()=>({[e1.f]:e1.N}),[]),{theme:i}=(0,e0.F)(),c=(0,s.useRef)(null),m=(0,s.useRef)(!0),{takeSnapshot:h}=e3(),[x,p]=(0,s.useState)(null),{nodes:f,edges:g,onInit:w,onNodesChange:b,onEdgesChange:j,onSubmit:y,onConnect:N,onAddNode:C,onCopyNode:k,onPasteNode:E,onSetNodesGroup:S,onDeleteNode:D,onCreateGroup:_}=(0,u.q)((0,d.N)(e=>({nodes:e.nodes,edges:e.edges,onInit:e.onInit,onNodesChange:(0,eQ.Z)(e.onNodesChange,1),onEdgesChange:(0,eQ.Z)(e.onEdgesChange,1),onSubmit:e.onSubmit,onConnect:e.onConnect,onAddNode:e.onAddNode,onCopyNode:e.onCopyNode,onPasteNode:e.onPasteNode,onSetNodesGroup:e.onSetNodesGroup,onDeleteNode:e.onDeleteNode,onCreateGroup:e.onCreateGroup}))),T=(0,s.useCallback)(()=>{m.current=!1},[]),z=(0,s.useCallback)((e,t)=>{h(),m.current=!0,j([{id:e.id,type:"remove"}]),N(t)},[j,N,h]),M=(0,s.useCallback)((e,t)=>{m.current||j([{id:t.id,type:"remove"}]),m.current=!0},[j]),O=(0,s.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),R=(0,s.useCallback)(e=>{e.preventDefault();let t=JSON.parse(e.dataTransfer.getData("application/reactflow"));if(!t)return;let n=(0,v.yY)(e.clientX,e.clientY,c,x);h(),C({widget:t,position:n})},[x,C,h]),L=(0,s.useCallback)((e,t,n)=>{h(),n.length>2||"Group"!==t.data.name||x.getIntersectingNodes(t).filter(e=>"Group"!==e.data.name&&(e.parentNode===t.id||!e.parentNode)).map(e=>e.id)},[x,h]),A=(0,s.useCallback)(()=>{let e=k();navigator.clipboard.writeText(JSON.stringify(e)),console.log("[Copy]",e)},[k]),P=(0,s.useCallback)(async()=>{try{let e=await navigator.clipboard.readText(),t=JSON.parse(e),n=(0,v.rf)(c,x);t&&E(t,n),console.log("[Paste]",t,n)}catch(e){console.log("[Paste]",e)}},[x,E]),I=(0,s.useCallback)(e=>{if(e.metaKey||e.ctrlKey&&!e.altKey){let t={KeyC:A,KeyV:P,KeyG:_,Enter:y}[e.code];t&&t()}},[x,A,P,_,D]);return(0,s.useEffect)(()=>(window.addEventListener("keydown",I),()=>{window.removeEventListener("keydown",I)}),[I]),(0,a.jsxs)(o.x$,{nodes:f,edges:g,nodeTypes:r,ref:c,fitView:!0,snapGrid:[20,20],minZoom:.05,multiSelectionKeyCode:["Shift","Control"],deleteKeyCode:["Delete","Backspace"],disableKeyboardA11y:!0,onNodesChange:b,onNodesDelete:e=>e.forEach(e=>D(e.id)),onEdgesChange:j,onEdgeUpdate:z,onEdgeUpdateStart:T,onEdgeUpdateEnd:M,onConnect:N,onNodeDragStart:L,onDrop:R,onDragOver:O,onInit:e=>{p(e),w()},children:[(0,a.jsx)(ez,{variant:l.Dots}),(0,a.jsx)(eF,{showZoom:!1,showInteractive:!1,className:"text-black hover:bg-primary hover:text-white"}),(0,a.jsx)(eJ,{position:"bottom-left",nodeColor:e=>e.data.color||("light"===i?"#ECF0F1":"#2C3E50"),style:{width:150,height:100}})]})},e5=e=>{let{...t}=e,{theme:n="system"}=(0,e0.F)();return(0,a.jsx)(es.x7,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"},duration:2500},...t})};function e6(){return(0,a.jsxs)("div",{className:"h-screen",children:[(0,a.jsx)(e5,{}),(0,a.jsx)(o.tV,{children:(0,a.jsx)(y,{children:(0,a.jsx)(e4,{})})}),(0,a.jsx)(ey,{})]})}},7333:function(){}},function(e){e.O(0,[310,780,387,14,971,69,744],function(){return e(e.s=4143)}),_N_E=e.O()}]);